<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publications</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Euan N. Bassey</h1>
            <p>Post-Doc in Magnetic Resonance & Materials Chemistry</p>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul>
                <li><a href="index.html">home</a></li>
                <li><a href="about.html">about</a></li>
                <li><a href="cv.html">cv</a></li>
                <li><a href="publications.html">publications</a></li>
                <li><a href="news.html">news</a></li>
                <li><a href="contact.html">contact</a></li>
            </ul>
        </div>
    </nav>

    <section>
        <div class="container">
            <h2>Publications</h2>
            <ul id="publications-list">Loading publications...</ul>
        </div>
    </section>

    <script>
        const zoteroGroupID = "5846342";  // Replace with your actual Zotero Group ID
        const zoteroAPI = `https://api.zotero.org/groups/${zoteroGroupID}/items?format=json`;

        fetch(zoteroAPI)
        .then(response => response.json())
        .then(data => {
            let publicationsList = document.getElementById("publications-list");
            publicationsList.innerHTML = ""; // Clear loading text
            if (data.length === 0) {
                publicationsList.innerHTML = "<li>No publications found.</li>";
                return;
            }

            data.forEach((item, index) => {
                if (item.data.title) {
                    // Format author names with initials
                    let authors = item.data.creators.map(c => {
                        if (c.lastName && c.firstName) {
                            let initials = c.firstName.split(" ").map(n => n[0]).join(".") + "."; // Convert to initials
                            let fullName = `${initials} ${c.lastName}`;
                            return c.lastName.includes("Bassey") ? `<u>${fullName}</u>` : fullName; // Underline your name
                        }
                        return c.lastName;
                    }).join(", ");

                    // Construct DOI link if available
                    let doiLink = item.data.DOI ? `<a href="https://doi.org/${item.data.DOI}" target="_blank">DOI</a>` : "";

                    let li = document.createElement("li");
                    li.innerHTML = `<strong>${index + 1}. ${item.data.title}</strong><br>
                        ${authors}<br>
                        <em>${item.data.publicationTitle || 'N/A'}</em> (${item.data.date || 'N/A'})<br>
                        ${doiLink}`;
                    li.style.marginBottom = "20px"; // Adds space between publications
                    publicationsList.appendChild(li);
                }
            });
        })
        .catch(error => {
            console.error("Error fetching publications:", error);
            document.getElementById("publications-list").innerHTML = "<li>Error loading publications.</li>";
        });
</script>

    <footer>
        <div class="container">
            <p>&copy; 2025 Euan Bassey. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
